<div class="container mt-3">
    <h2>Create New Sub Category</h2>
    <form [formGroup]="subCategoryForm" (ngSubmit)="onSubmit()">
        <!-- Name -->
        <div class="mb-3">
            <label for="name">Name</label>
            <input type="text" id="name" class="form-control" formControlName="name" placeholder="Enter sub category name" />
            <div *ngIf="subCategoryForm.get('name')?.invalid && subCategoryForm.get('name')?.touched">
                <small class="text-danger">Name is required</small>
            </div>
        </div>

        <div class="mb-3">
            <label for="productCategoryId">Product Sub category</label>
            <select id="productCategoryId" class="form-control" formControlName="productCategoryId">
                <option value="">Select Category</option>
                <option *ngFor="let cat of categories" [ngValue]="cat.id">{{ cat.name }}</option>

            </select>
            <div
                *ngIf="subCategoryForm.get('productCategoryId')?.invalid && subCategoryForm.get('productCategoryId')?.touched">
                <small class="text-danger">Category is required</small>
            </div>
        </div>

        <div class="mb-3">
            <label for="thumbnail">Thumbnail Image</label>
            <input type="file" id="thumbnail" class="form-control" (change)="onFileChange($event)" />
        </div>

        <div class="mb-3">
            <label for="description">Description</label>
            <editor formControlName="description" apiKey="82zjfv71ttfqp08cvqel6a06gj0ytkmo5k09lkssw79fdrtk" [init]="{
                height: 500,
                plugins: [
                  'a11ychecker', 'advlist', 'advcode', 'advtable', 'autolink', 'checklist', 'export',
                  'lists', 'link', 'image', 'charmap', 'preview', 'anchor', 'searchreplace', 'visualblocks',
                  'powerpaste', 'fullscreen', 'formatpainter', 'insertdatetime', 'media', 'table', 'help', 'wordcount'
                ],
                toolbar: 'undo redo | casechange blocks | bold italic backcolor | \
                          alignleft aligncenter alignright alignjustify | \
                          bullist numlist checklist outdent indent | removeformat | a11ycheck code table help'
              }"></editor>
            <div *ngIf="subCategoryForm.get('description')?.invalid && subCategoryForm.get('description')?.touched">
                <small class="text-danger">Description is required</small>
            </div>
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="subCategoryForm.invalid">Create Category</button>
    </form>

    
</div>
<div *ngIf="isSubmitting" class="d-flex justify-content-center align-items-center"
        style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 1050;">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>